# addEventListener - NasÅ‚uchiwanie zdarzeÅ„

## Co to jest addEventListener?

`addEventListener()` to metoda, ktÃ³ra pozwala **nasÅ‚uchiwaÄ‡ na zdarzenia** (events) - czyli reagowaÄ‡ na akcje uÅ¼ytkownika takie jak klikniÄ™cia, ruchy myszy, wpisywanie tekstu itp. Jest to **najnowoczeÅ›niejszy i zalecany sposÃ³b** obsÅ‚ugi zdarzeÅ„ w JavaScript.

## SkÅ‚adnia

```javascript
element.addEventListener(typ_zdarzenia, funkcja_obsÅ‚ugi, opcje);
```

- **`typ_zdarzenia`** - ciÄ…g znakÃ³w okreÅ›lajÄ…cy typ zdarzenia (np. "click", "change", "keydown")
- **`funkcja_obsÅ‚ugi`** - funkcja, ktÃ³ra zostanie wykonana gdy zdarzenie siÄ™ wystÄ™pi
- **`opcje`** - (opcjonalne) obiekt z dodatkowymi parametrami

## Najpopularniejsze zdarzenia

| Zdarzenie | Opis |
|-----------|------|
| `click` | KlikniÄ™cie myszÄ… |
| `dblclick` | PodwÃ³jne klikniÄ™cie |
| `mouseover` | Najechanie myszÄ… na element |
| `mouseout` | Zjechanie myszÄ… z elementu |
| `keydown` | NaciÅ›niÄ™cie klawisza |
| `keyup` | Zwolnienie klawisza |
| `change` | Zmiana wartoÅ›ci inputa/selecta |
| `input` | Wpisanie tekstu do inputa |
| `submit` | WysÅ‚anie formularza |
| `focus` | Skupienie siÄ™ na elemencie |
| `blur` | Stracenie skupienia przez element |
| `load` | ZaÅ‚adowanie strony |

## PrzykÅ‚ady podstawowe

### PrzykÅ‚ad 1: Prosty klik

```html
<button id="moj-przycisk">Kliknij mnie</button>

<script>
  const przycisk = document.getElementById("moj-przycisk");
  
  przycisk.addEventListener("click", function() {
    alert("Przycisk zostaÅ‚ klikniÄ™ty!");
  });
</script>
```

### PrzykÅ‚ad 2: Funkcja zewnÄ™trzna

```javascript
const przycisk = document.getElementById("moj-przycisk");

// Definiujemy funkcjÄ™
function obslugiKlik() {
  console.log("KlikniÄ™to przycisk");
}

// Dodajemy nasÅ‚uchiwacz
przycisk.addEventListener("click", obslugiKlik);
```

### PrzykÅ‚ad 3: Arrow function (nowoczesny sposÃ³b)

```javascript
const przycisk = document.getElementById("moj-przycisk");

przycisk.addEventListener("click", () => {
  console.log("Przycisk klikniÄ™ty!");
});
```

## DostÄ™p do obiektu zdarzenia (event object)

Funkcja obsÅ‚ugi zdarzenia automatycznie otrzymuje **obiekt zdarzenia** (`event` lub `e`), ktÃ³ry zawiera informacje o tym co siÄ™ staÅ‚o.

```javascript
const przycisk = document.getElementById("moj-przycisk");

przycisk.addEventListener("click", function(event) {
  console.log(event); // PeÅ‚ny obiekt zdarzenia
  console.log(event.type); // "click"
  console.log(event.target); // Element, ktÃ³ry zostaÅ‚ klikniÄ™ty
  console.log(event.clientX); // Pozycja X myszy
  console.log(event.clientY); // Pozycja Y myszy
});
```

## Praktyczne przykÅ‚ady

### PrzykÅ‚ad 1: Zmiana tekstu po klikniÄ™ciu

```html
<button id="zmienTekst">ZmieÅ„</button>
<p id="tekst">Oryginalny tekst</p>

<script>
  const przycisk = document.getElementById("zmienTekst");
  const paragraf = document.getElementById("tekst");
  
  przycisk.addEventListener("click", function() {
    paragraf.textContent = "Tekst zostaÅ‚ zmieniony!";
  });
</script>
```

### PrzykÅ‚ad 2: Monitorowanie wpisywania tekstu

```html
<input type="text" id="input" placeholder="Wpisz coÅ›...">
<p id="wynik">NapisaÅ‚eÅ›: </p>

<script>
  const input = document.getElementById("input");
  const wynik = document.getElementById("wynik");
  
  input.addEventListener("input", function(event) {
    wynik.textContent = "NapisaÅ‚eÅ›: " + event.target.value;
  });
</script>
```

### PrzykÅ‚ad 3: Najechanie myszÄ…

```html
<div id="box" style="width: 200px; height: 200px; background: blue;">
  NajadÅº na mnie
</div>

<script>
  const box = document.getElementById("box");
  
  // Najechanie
  box.addEventListener("mouseover", function() {
    this.style.backgroundColor = "red";
  });
  
  // Zjechanie
  box.addEventListener("mouseout", function() {
    this.style.backgroundColor = "blue";
  });
</script>
```

### PrzykÅ‚ad 4: ObsÅ‚uga klawiatury

```html
<input type="text" id="input" placeholder="Wpisz coÅ›...">
<p id="komunikat"></p>

<script>
  const input = document.getElementById("input");
  const komunikat = document.getElementById("komunikat");
  
  input.addEventListener("keydown", function(event) {
    if (event.key === "Enter") {
      komunikat.textContent = "WcisnÄ…Å‚eÅ› Enter! Wpisana wartoÅ›Ä‡: " + input.value;
    }
  });
</script>
```

### PrzykÅ‚ad 5: ObsÅ‚uga formularza

```html
<form id="formularz">
  <input type="text" id="nazwa" placeholder="Twoje imiÄ™">
  <button type="submit">WyÅ›lij</button>
</form>
<p id="potwierdzenie"></p>

<script>
  const formularz = document.getElementById("formularz");
  const potwierdzenie = document.getElementById("potwierdzenie");
  
  formularz.addEventListener("submit", function(event) {
    event.preventDefault(); // Zapobiega przeÅ‚adowaniu strony
    
    const nazwa = document.getElementById("nazwa").value;
    potwierdzenie.textContent = "Witaj, " + nazwa + "!";
  });
</script>
```

## Usuwanie nasÅ‚uchiwacza zdarzeÅ„

Czasem chcemy przestaÄ‡ nasÅ‚uchiwaÄ‡ na zdarzenie. UÅ¼ywamy do tego `removeEventListener()`.

```javascript
const przycisk = document.getElementById("przycisk");

function obslugiKlik() {
  console.log("KlikniÄ™to");
}

// Dodanie
przycisk.addEventListener("click", obslugiKlik);

// UsuniÄ™cie
przycisk.removeEventListener("click", obslugiKlik);
```

**WaÅ¼ne:** Aby usunÄ…Ä‡ nasÅ‚uchiwacz, funkcja musi byÄ‡ nazwana (nie moÅ¼e byÄ‡ anonimowa), bo musimy jÄ… zidentyfikowaÄ‡.

## PorÃ³wnanie sposobÃ³w obsÅ‚ugi zdarzeÅ„

| Metoda | PrzykÅ‚ad | Zaleta | Wada |
|--------|----------|--------|------|
| **Atrybut HTML** | `<button onclick="...">` | Prosta | Mieszanie HTML z JS |
| **WÅ‚aÅ›ciwoÅ›Ä‡ DOM** | `button.onclick = ...` | Åatwa | MoÅ¼na przypisaÄ‡ tylko jedno zdarzenie |
| **addEventListener** | `button.addEventListener()` | Nowoczesna, elastyczna | Nieco bardziej skomplikowana |

**Rekomendacja:** Zawsze uÅ¼ywaj `addEventListener()` - to standard w nowoczesnym JavaScript!

## Zaawansowane opcje

### Opcja `once` - nasÅ‚uchiwacz tylko raz

```javascript
const przycisk = document.getElementById("przycisk");

przycisk.addEventListener("click", function() {
  alert("To pojawi siÄ™ tylko raz!");
}, { once: true });
```

Po pierwszym klikniÄ™ciu nasÅ‚uchiwacz automatycznie siÄ™ usuwa.

### Opcja `capture` - faza przechwytywania

```javascript
element.addEventListener("click", funkcja, { capture: true });
```

To zaawansowana opcja dotyczÄ…ca kolejnoÅ›ci obsÅ‚ugi zdarzeÅ„ w DOM.

## Typowe bÅ‚Ä™dy

### âŒ BÅ‚Ä…d 1: Wykonanie funkcji zamiast przypisania

```javascript
// Å¹LE - funkcja zostanie wykonana natychmiast
przycisk.addEventListener("click", oblicz());

// DOBRZE - funkcja bÄ™dzie wykonana po klikniÄ™ciu
przycisk.addEventListener("click", oblicz);
```

### âŒ BÅ‚Ä…d 2: Zapomnienie `()` w arrow function

```javascript
// Å¹LE - funkcja nie zostanie wykonana
przycisk.addEventListener("click", () => oblicz);

// DOBRZE
przycisk.addEventListener("click", () => oblicz());
```

### âŒ BÅ‚Ä…d 3: Brak `event.preventDefault()` w formularzu

```javascript
formularz.addEventListener("submit", function(event) {
  event.preventDefault(); // WAÅ»NE! Zapobiega przeÅ‚adowaniu strony
  // Reszta kodu...
});
```

## Zadanie praktyczne

StwÃ³rz konter klikniÄ™Ä‡ z funkcjonalnoÅ›ciÄ…:

```html
<div>
  <p>Liczba klikniÄ™Ä‡: <span id="licznik">0</span></p>
  <button id="dodaj">+1</button>
  <button id="odejmij">-1</button>
  <button id="reset">Reset</button>
</div>

<script>
  // TwÃ³j kod tutaj
  // PodpowiedÅº: uÅ¼yj addEventListener dla kaÅ¼dego przycisku
  // PamiÄ™taj o aktualizacji wyÅ›wietlanego licznika
</script>
```

**RozwiÄ…zanie:**
```javascript
let licznik = 0;
const licznikElement = document.getElementById("licznik");
const przyciskDodaj = document.getElementById("dodaj");
const przyciskOdejmij = document.getElementById("odejmij");
const przyciskReset = document.getElementById("reset");

przyciskDodaj.addEventListener("click", function() {
  licznik++;
  licznikElement.textContent = licznik;
});

przyciskOdejmij.addEventListener("click", function() {
  licznik--;
  licznikElement.textContent = licznik;
});

przyciskReset.addEventListener("click", function() {
  licznik = 0;
  licznikElement.textContent = licznik;
});
```

## Podsumowanie

**addEventListener** to najlepszy sposÃ³b do obsÅ‚ugi zdarzeÅ„ w JavaScript:

âœ… Nowoczesny i zalecany przez standardy  
âœ… MoÅ¼liwoÅ›Ä‡ dodania wielu nasÅ‚uchiwaczy na jeden element  
âœ… DostÄ™p do obiektu zdarzenia z informacjami  
âœ… Elastyczne opcje (once, capture)  
âœ… MoÅ¼liwoÅ›Ä‡ usuniÄ™cia nasÅ‚uchiwacza  

Zdarzenia to kluczowa czÄ™Å›Ä‡ interaktywnych stron internetowych - bÄ…dÅº pewny Å¼e je dobrze zrozumiesz! ğŸ¯

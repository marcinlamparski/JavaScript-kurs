# Kurs Podstaw JavaScript - Lekcja 9

## Lekcja 9: Funkcje w JavaScript

### Czym są funkcje?

Funkcje to bloki kodu, które wykonują określone zadanie i mogą być wywoływane wielokrotnie. Pozwalają na organizację i ponowne wykorzystanie kodu.

**Korzyści z używania funkcji:**
- Organizacja kodu
- Unikanie powtórzeń (DRY - Don't Repeat Yourself)
- Łatwiejsze testowanie
- Lepsze zarządzanie kodem

### Deklaracja funkcji

#### 1. Function Declaration (deklaracja funkcji)

```javascript
function powitanie() {
    console.log("Witaj w JavaScript!");
}

// Wywołanie funkcji
powitanie(); // "Witaj w JavaScript!"

// Funkcja z prostym zadaniem
function wyswietlData() {
    let dzisiaj = new Date();
    console.log(dzisiaj);
}

wyswietlData();
```

#### 2. Function Expression (wyrażenie funkcji)

```javascript
const powitanie = function() {
    console.log("Witaj!");
};

powitanie(); // "Witaj!"

// Różnica: function declarations są "hoistowane"
// (można ich użyć przed deklaracją)
```

#### 3. Arrow Functions (funkcje strzałkowe) - ES6

```javascript
// Podstawowa składnia
const powitanie = () => {
    console.log("Witaj!");
};

// Krótsza forma dla jednej instrukcji
const powiedzCzesc = () => console.log("Cześć!");

// Bez nawiasów dla jednego parametru
const podwoj = x => x * 2;

console.log(podwoj(5)); // 10
```

### Parametry funkcji

Funkcje mogą przyjmować dane wejściowe (parametry/argumenty).

```javascript
// Funkcja z jednym parametrem
function powitaj(imie) {
    console.log(`Witaj, ${imie}!`);
}

powitaj("Anna"); // "Witaj, Anna!"
powitaj("Piotr"); // "Witaj, Piotr!"

// Funkcja z wieloma parametrami
function dodaj(a, b) {
    console.log(a + b);
}

dodaj(5, 3); // 8
dodaj(10, 20); // 30

// Funkcja z domyślnymi parametrami (ES6)
function powitajZMiastem(imie, miasto = "Warszawa") {
    console.log(`Witaj, ${imie} z ${miasto}!`);
}

powitajZMiastem("Jan"); // "Witaj, Jan z Warszawa!"
powitajZMiastem("Ewa", "Kraków"); // "Witaj, Ewa z Kraków!"
```

### Zwracanie wartości (return)

Funkcje mogą zwracać wynik obliczeń.

```javascript
function dodaj(a, b) {
    return a + b;
}

let wynik = dodaj(5, 3);
console.log(wynik); // 8

// Użycie w wyrażeniu
console.log(dodaj(10, 20) * 2); // 60

// Return kończy wykonanie funkcji
function sprawdzWiek(wiek) {
    if (wiek < 18) {
        return "Niepełnoletni";
    }
    return "Pełnoletni";
    console.log("To się nigdy nie wykona"); // Kod po return jest ignorowany
}

console.log(sprawdzWiek(16)); // "Niepełnoletni"
```

#### Funkcje bez return

```javascript
// Funkcja bez return zwraca undefined
function nic() {
    let x = 5;
}

console.log(nic()); // undefined

// Return bez wartości też zwraca undefined
function test() {
    return;
}

console.log(test()); // undefined
```

### Przykłady praktycznych funkcji

#### Funkcje matematyczne

```javascript
function obliczObwod(promien) {
    return 2 * Math.PI * promien;
}

function obliczPole(promien) {
    return Math.PI * promien ** 2;
}

console.log(obliczObwod(5)); // 31.41592653589793
console.log(obliczPole(5)); // 78.53981633974483

// Funkcja BMI
function obliczBMI(waga, wzrost) {
    return waga / (wzrost ** 2);
}

let bmi = obliczBMI(70, 1.75);
console.log(`Twoje BMI: ${bmi.toFixed(2)}`); // "Twoje BMI: 22.86"
```

#### Funkcje z logiką warunkową

```javascript
function czyPelnoletni(wiek) {
    return wiek >= 18;
}

console.log(czyPelnoletni(20)); // true
console.log(czyPelnoletni(15)); // false

function ocenaBMI(bmi) {
    if (bmi < 18.5) {
        return "Niedowaga";
    } else if (bmi < 25) {
        return "Waga prawidłowa";
    } else if (bmi < 30) {
        return "Nadwaga";
    } else {
        return "Otyłość";
    }
}

console.log(ocenaBMI(22)); // "Waga prawidłowa"
console.log(ocenaBMI(28)); // "Nadwaga"
```

#### Funkcje z tablicami

```javascript
function sumaTablicy(tablica) {
    let suma = 0;
    for (let liczba of tablica) {
        suma += liczba;
    }
    return suma;
}

console.log(sumaTablicy([1, 2, 3, 4, 5])); // 15

function srednia(tablica) {
    return sumaTablicy(tablica) / tablica.length;
}

console.log(srednia([10, 20, 30, 40])); // 25

function znajdzMax(tablica) {
    let max = tablica[0];
    for (let liczba of tablica) {
        if (liczba > max) {
            max = liczba;
        }
    }
    return max;
}

console.log(znajdzMax([3, 7, 2, 9, 1])); // 9
```

#### Funkcje z stringami

```javascript
function odwrocString(tekst) {
    return tekst.split("").reverse().join("");
}

console.log(odwrocString("JavaScript")); // "tpircSavaJ"

function czyPalindrom(tekst) {
    let oczyszczony = tekst.toLowerCase().replace(/\s/g, "");
    return oczyszczony === odwrocString(oczyszczony);
}

console.log(czyPalindrom("kajak")); // true
console.log(czyPalindrom("Kobyła ma mały bok")); // true
console.log(czyPalindrom("JavaScript")); // false

function liczSamogloski(tekst) {
    let samogloski = "aąeęioóuy";
    let licznik = 0;
    
    for (let litera of tekst.toLowerCase()) {
        if (samogloski.includes(litera)) {
            licznik++;
        }
    }
    
    return licznik;
}

console.log(liczSamogloski("JavaScript")); // 3
```

### Arrow functions - szczegóły

```javascript
// Klasyczna funkcja
const suma1 = function(a, b) {
    return a + b;
};

// Arrow function (pełna forma)
const suma2 = (a, b) => {
    return a + b;
};

// Arrow function (skrócona - implicit return)
const suma3 = (a, b) => a + b;

// Jeden parametr - bez nawiasów
const kwadrat = x => x * x;

// Bez parametrów - puste nawiasy
const losowa = () => Math.random();

// Zwracanie obiektu - owijamy w nawiasy
const utworzOsobe = (imie, wiek) => ({ imie: imie, wiek: wiek });

console.log(suma3(5, 3)); // 8
console.log(kwadrat(4)); // 16
console.log(losowa()); // liczba losowa 0-1
console.log(utworzOsobe("Jan", 30)); // { imie: "Jan", wiek: 30 }
```

### Funkcje wyższego rzędu

Funkcje, które przyjmują inne funkcje jako argumenty lub je zwracają.

```javascript
// Funkcja jako argument
function wykonajOperacje(a, b, operacja) {
    return operacja(a, b);
}

const dodaj = (x, y) => x + y;
const pomnoz = (x, y) => x * y;

console.log(wykonajOperacje(5, 3, dodaj)); // 8
console.log(wykonajOperacje(5, 3, pomnoz)); // 15

// Praktyczny przykład z tablicami
const liczby = [1, 2, 3, 4, 5];

// Funkcja callback w forEach
liczby.forEach(liczba => console.log(liczba * 2));

// Funkcja callback w map
const podwojone = liczby.map(liczba => liczba * 2);
console.log(podwojone); // [2, 4, 6, 8, 10]

// Funkcja callback w filter
const parzyste = liczby.filter(liczba => liczba % 2 === 0);
console.log(parzyste); // [2, 4]
```

### Scope (zasięg zmiennych)

```javascript
// Zmienne globalne
let globalnaZmienna = "Dostępna wszędzie";

function testScope() {
    // Zmienne lokalne
    let lokalnaZmienna = "Dostępna tylko w funkcji";
    console.log(globalnaZmienna); // OK - dostęp do globalnej
    console.log(lokalnaZmienna); // OK
}

testScope();
console.log(globalnaZmienna); // OK
// console.log(lokalnaZmienna); // BŁĄD - zmienna nie istnieje tutaj

// Block scope (let i const)
if (true) {
    let x = 10;
    const y = 20;
    var z = 30;
}

// console.log(x); // BŁĄD
// console.log(y); // BŁĄD
console.log(z); // 30 - var ignoruje block scope!

// Shadowing (przysłanianie zmiennych)
let x = "zewnętrzne";

function test() {
    let x = "wewnętrzne";
    console.log(x); // "wewnętrzne"
}

test();
console.log(x); // "zewnętrzne"
```

### Ćwiczenia praktyczne - Lekcja 9

#### Ćwiczenie 9.1: Podstawowe funkcje
```javascript
// Napisz funkcje:
// 1. celsjuszNaFahrenheit(celsius) - konwertuje C° na F°
//    Wzór: F = C * 9/5 + 32
// 2. fahrenheitNaCelsjusz(fahrenheit) - konwertuje F° na C°
//    Wzór: C = (F - 32) * 5/9

// Przetestuj z różnymi wartościami
```

#### Ćwiczenie 9.2: Walidacja danych
```javascript
// Napisz funkcje:
// 1. czyValidEmail(email) - sprawdza czy email zawiera @ i .
// 2. czyMocneHaslo(haslo) - sprawdza czy hasło ma min. 8 znaków
//    i zawiera cyfrę
// 3. walidujWiek(wiek) - zwraca true jeśli wiek 0-120
```

#### Ćwiczenie 9.3: Operacje na tablicach
```javascript
// Napisz funkcje:
// 1. usunDuplikaty(tablica) - zwraca tablicę bez powtórzeń
//    Wskazówka: użyj includes() lub Set
// 2. odwrocTablice(tablica) - zwraca odwróconą tablicę
//    NIE używaj reverse()!
// 3. polaczTablice(tab1, tab2) - łączy dwie tablice
```

#### Ćwiczenie 9.4: Operacje tekstowe
```javascript
// Napisz funkcje:
// 1. zliczSlowa(tekst) - zwraca liczbę słów
// 2. pierwszaWielka(tekst) - wielka litera pierwszego słowa
// 3. inicjaly(pelneImie) - zwraca inicjały
//    np. "Jan Kowalski" -> "J.K."
```

#### Ćwiczenie 9.5: Kalkulator
```javascript
// Napisz funkcję kalkulator(a, b, operator)
// operator może być: "+", "-", "*", "/"
// Funkcja zwraca wynik operacji
// Jeśli operator nieprawidłowy, zwraca null

console.log(kalkulator(10, 5, "+")); // 15
console.log(kalkulator(10, 5, "-")); // 5
console.log(kalkulator(10, 5, "*")); // 50
console.log(kalkulator(10, 5, "/")); // 2
console.log(kalkulator(10, 5, "%")); // null
```

#### Ćwiczenie 9.6: Statystyki
```javascript
// Napisz funkcję getStats(tablica)
// Funkcja zwraca obiekt ze statystykami:
// {
//   suma: suma wszystkich elementów,
//   srednia: średnia,
//   min: wartość minimalna,
//   max: wartość maksymalna
// }

let liczby = [4, 8, 15, 16, 23, 42];
console.log(getStats(liczby));
// { suma: 108, srednia: 18, min: 4, max: 42 }
```

#### Ćwiczenie 9.7: FizzBuzz funkcja
```javascript
// Napisz funkcję fizzBuzz(n)
// Zwraca tablicę z liczbami od 1 do n, gdzie:
// - liczby podzielne przez 3 zamienione na "Fizz"
// - liczby podzielne przez 5 zamienione na "Buzz"
// - liczby podzielne przez 3 i 5 zamienione na "FizzBuzz"

console.log(fizzBuzz(15));
// [1, 2, "Fizz", 4, "Buzz", "Fizz", 7, 8, "Fizz", 
//  "Buzz", 11, "Fizz", 13, 14, "FizzBuzz"]
```

#### Ćwiczenie 9.8: Fibonacci
```javascript
// Napisz funkcję fibonacci(n)
// Zwraca n-ty element ciągu Fibonacciego
// Ciąg: 0, 1, 1, 2, 3, 5, 8, 13, 21, 34...
// Każda liczba to suma dwóch poprzednich

console.log(fibonacci(0)); // 0
console.log(fibonacci(1)); // 1
console.log(fibonacci(6)); // 8
console.log(fibonacci(10)); // 55
```

---

## Podsumowanie Lekcji 9

### Poznałeś:
✅ Trzy sposoby deklaracji funkcji (declaration, expression, arrow)  
✅ Parametry i argumenty funkcji  
✅ Domyślne wartości parametrów  
✅ Zwracanie wartości (return)  
✅ Arrow functions (=>) i ich składnię  
✅ Funkcje wyższego rzędu (higher-order functions)  
✅ Scope (zasięg zmiennych): globalny, lokalny, block scope  

### Najważniejsze zasady:
- Funkcje powinny robić **jedną rzecz** i robić ją dobrze
- Używaj opisowych nazw funkcji (czasowniki: oblicz, sprawdz, utworz)
- Unikaj modyfikowania zmiennych globalnych w funkcjach
- Arrow functions (=>) to krótszy zapis, ale nie zawsze zamiennik
- Return kończy wykonanie funkcji

### Dobre praktyki:
✅ Jedna funkcja = jedno zadanie  
✅ Parametry zamiast zmiennych globalnych  
✅ Zwracaj wartości zamiast modyfikować zmienne  
✅ Używaj `const` dla funkcji (function expressions i arrow)  
✅ Komentuj złożone funkcje  

### Typowe błędy:
❌ Zapomnienie `return` gdy funkcja powinna zwrócić wartość  
❌ Modyfikowanie parametrów obiektowych (side effects)  
❌ Za długie funkcje (powinny mieć < 20 linii)  
❌ Niejasne nazwy funkcji (np. `doStuff`, `process`)  

### Gotowy na więcej?
W następnej lekcji nauczysz się:
- Prostych obiektów
- Właściwości i metod obiektów
- Jak organizować dane w struktury

**Funkcje to fundament czystego kodu. Praktykuj je intensywnie przed przejściem dalej!**